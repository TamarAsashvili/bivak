'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _noop = require('lodash/noop');

var _noop2 = _interopRequireDefault(_noop);

var _cloneDeep = require('lodash/cloneDeep');

var _cloneDeep2 = _interopRequireDefault(_cloneDeep);

var _cleanProps = require('./cleanProps');

var _cleanProps2 = _interopRequireDefault(_cleanProps);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

// updateShapes called by onCreated callback in Leaflet map
//
// e.layer represents the newly created vector layer
var updateShapes = function updateShapes(props, map, e) {
  var p = (0, _cloneDeep2.default)(props);
  var geoJSON = e.layer.toGeoJSON();
  switch (geoJSON.geometry.type) {
    case 'Polygon':
      p.features.push(geoJSON);
      map.removeLayer(e.layer);
      break;
    case 'Point':
      p.points.push(geoJSON);
      map.removeLayer(e.layer);
      // p.newCircleCenter = geoJSON;
      // p.newCircleRadius = 0.1;
      // p.makeCircleOn = true;
      break;
    default:
      break;
  }
  (0, _cleanProps2.default)(p, props.onShapeChange, _noop2.default);
};

exports.default = updateShapes;