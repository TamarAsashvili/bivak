{"ast":null,"code":"function _toConsumableArray(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  } else {\n    return Array.from(arr);\n  }\n}\n\nimport React from 'react';\nimport { defaultTranslateOptions } from './localize';\nexport var getLocalizedElement = function getLocalizedElement(options) {\n  var translation = options.translation,\n      data = options.data,\n      renderInnerHtml = options.renderInnerHtml;\n  var translatedValueOrArray = templater(translation, data); // if result of templater is string, do the usual stuff\n\n  if (typeof translatedValueOrArray === 'string') {\n    return renderInnerHtml === true && hasHtmlTags(translatedValueOrArray) ? React.createElement('span', {\n      dangerouslySetInnerHTML: {\n        __html: translatedValueOrArray\n      }\n    }) : translatedValueOrArray;\n  } // at this point we know we have react components;\n  // check if there are HTMLTags in the translation (not allowed)\n\n\n  var _iteratorNormalCompletion = true;\n  var _didIteratorError = false;\n  var _iteratorError = undefined;\n\n  try {\n    for (var _iterator = translatedValueOrArray[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n      var portion = _step.value;\n\n      if (typeof portion === 'string' && hasHtmlTags(portion)) {\n        warning('HTML tags in the translation string are not supported when passing React components as arguments to the translation.');\n        return '';\n      }\n    } // return as Element\n\n  } catch (err) {\n    _didIteratorError = true;\n    _iteratorError = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion && _iterator.return) {\n        _iterator.return();\n      }\n    } finally {\n      if (_didIteratorError) {\n        throw _iteratorError;\n      }\n    }\n  }\n\n  return React.createElement.apply(React, ['span', null].concat(_toConsumableArray(translatedValueOrArray)));\n};\nexport var hasHtmlTags = function hasHtmlTags(value) {\n  var pattern = /(&[^\\s]*;|<\\/?\\w+((\\s+\\w+(\\s*=\\s*(?:\".*?\"|'.*?'|[\\^'\">\\s]+))?)+\\s*|\\s*)\\/?>)/;\n  return value.search(pattern) >= 0;\n};\n/**\n * @func templater\n * @desc A poor mans template parser\n * @param {string} strings The template string\n * @param {object} data The data that should be inserted in template\n * @return {string} The template string with the data merged in\n */\n\nexport var templater = function templater(strings) {\n  var data = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  if (!strings) return ''; // ${**}\n  // brackets to include it in the result of .split()\n\n  var genericPlaceholderPattern = '(\\\\${\\\\s*[^\\\\s}]+\\\\s*})'; // split: from 'Hey ${name}' -> ['Hey', '${name}']\n  // filter: clean empty strings\n  // map: replace ${prop} with data[prop]\n\n  var splitStrings = strings.split(new RegExp(genericPlaceholderPattern, 'gmi')).filter(function (str) {\n    return !!str;\n  }).map(function (templatePortion) {\n    var matched = void 0;\n\n    for (var prop in data) {\n      if (matched) break;\n      var pattern = '\\\\${\\\\s*' + prop + '\\\\s*}';\n      var regex = new RegExp(pattern, 'gmi');\n      if (regex.test(templatePortion)) matched = data[prop];\n    }\n\n    if (typeof matched === 'undefined') return templatePortion;\n    return matched;\n  }); // if there is a React element, return as array\n\n  if (splitStrings.some(function (portion) {\n    return React.isValidElement(portion);\n  })) {\n    return splitStrings;\n  } // otherwise concatenate all portions into the translated value\n\n\n  return splitStrings.reduce(function (translated, portion) {\n    return translated + ('' + portion);\n  }, '');\n};\nexport var getIndexForLanguageCode = function getIndexForLanguageCode(code, languages) {\n  return languages.map(function (language) {\n    return language.code;\n  }).indexOf(code);\n};\nexport var objectValuesToString = function objectValuesToString(data) {\n  return !Object.values ? Object.keys(data).map(function (key) {\n    return data[key].toString();\n  }).toString() : Object.values(data).toString();\n};\nexport var validateOptions = function validateOptions(options) {\n  if (options.onMissingTranslation !== undefined && typeof options.onMissingTranslation !== 'function') {\n    throw new Error('react-localize-redux: an invalid onMissingTranslation function was provided.');\n  }\n\n  if (options.renderToStaticMarkup !== false && typeof options.renderToStaticMarkup !== 'function') {\n    throw new Error('\\n      react-localize-redux: initialize option renderToStaticMarkup is invalid.\\n      Please see https://ryandrewjohnson.github.io/react-localize-redux-docs/#initialize.\\n    ');\n  }\n\n  return options;\n};\nexport var getTranslationsForLanguage = function getTranslationsForLanguage(language, languages, translations) {\n  // no language! return no translations\n  if (!language) {\n    return {};\n  }\n\n  var languageCode = language.code;\n  var languageIndex = getIndexForLanguageCode(languageCode, languages);\n  var keys = Object.keys(translations);\n  var totalKeys = keys.length;\n  var translationsForLanguage = {};\n\n  for (var i = 0; i < totalKeys; i++) {\n    var key = keys[i];\n    translationsForLanguage[key] = translations[key][languageIndex];\n  }\n\n  return translationsForLanguage;\n};\nexport var storeDidChange = function storeDidChange(store, onChange) {\n  var currentState = void 0;\n\n  function handleChange() {\n    var nextState = store.getState();\n\n    if (nextState !== currentState) {\n      onChange(currentState);\n      currentState = nextState;\n    }\n  }\n\n  var unsubscribe = store.subscribe(handleChange);\n  handleChange();\n  return unsubscribe;\n};\nexport var getSingleToMultilanguageTranslation = function getSingleToMultilanguageTranslation(language, languageCodes, flattenedTranslations, existingTranslations) {\n  var languageIndex = languageCodes.indexOf(language);\n  var translations = languageIndex >= 0 ? flattenedTranslations : {};\n  var keys = Object.keys(translations);\n  var totalKeys = keys.length;\n  var singleLanguageTranslations = {};\n\n  var _loop = function _loop(i) {\n    var key = keys[i]; // loop through each language, and for languages that don't match languageIndex\n    // keep existing translation data, and for languageIndex store new translation data\n\n    var translationValues = languageCodes.map(function (code, index) {\n      var existingValues = existingTranslations[key] || [];\n      return index === languageIndex ? flattenedTranslations[key] : existingValues[index];\n    });\n    singleLanguageTranslations[key] = translationValues;\n  };\n\n  for (var i = 0; i < totalKeys; i++) {\n    _loop(i);\n  }\n\n  return singleLanguageTranslations;\n};\nexport var get = function get(obj, path) {\n  var defaultValue = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : undefined;\n  var pathArr = path.split('.').filter(Boolean);\n  return pathArr.reduce(function (ret, key) {\n    return ret && ret[key] ? ret[key] : defaultValue;\n  }, obj);\n}; // Thanks react-redux for utility function\n// https://github.com/reactjs/react-redux/blob/master/src/utils/warning.js\n\nexport var warning = function warning(message) {\n  if (typeof console !== 'undefined' && typeof console.error === 'function') {\n    console.error(message);\n  }\n\n  try {\n    // This error was thrown as a convenience so that if you enable\n    // \"break on all exceptions\" in your console,\n    // it would pause the execution at this line.\n    throw new Error(message);\n  } catch (e) {}\n};","map":{"version":3,"sources":["/home/mediamonster/Desktop/react_app/bivak/node_modules/react-localize-redux/es/utils.js"],"names":["_toConsumableArray","arr","Array","isArray","i","arr2","length","from","React","defaultTranslateOptions","getLocalizedElement","options","translation","data","renderInnerHtml","translatedValueOrArray","templater","hasHtmlTags","createElement","dangerouslySetInnerHTML","__html","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_iterator","Symbol","iterator","_step","next","done","portion","value","warning","err","return","apply","concat","pattern","search","strings","arguments","genericPlaceholderPattern","splitStrings","split","RegExp","filter","str","map","templatePortion","matched","prop","regex","test","some","isValidElement","reduce","translated","getIndexForLanguageCode","code","languages","language","indexOf","objectValuesToString","Object","values","keys","key","toString","validateOptions","onMissingTranslation","Error","renderToStaticMarkup","getTranslationsForLanguage","translations","languageCode","languageIndex","totalKeys","translationsForLanguage","storeDidChange","store","onChange","currentState","handleChange","nextState","getState","unsubscribe","subscribe","getSingleToMultilanguageTranslation","languageCodes","flattenedTranslations","existingTranslations","singleLanguageTranslations","_loop","translationValues","index","existingValues","get","obj","path","defaultValue","pathArr","Boolean","ret","message","console","error","e"],"mappings":"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","sourcesContent":["function _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nimport React from 'react';\nimport { defaultTranslateOptions } from './localize';\n\n\nexport var getLocalizedElement = function getLocalizedElement(options) {\n  var translation = options.translation,\n      data = options.data,\n      renderInnerHtml = options.renderInnerHtml;\n\n\n  var translatedValueOrArray = templater(translation, data);\n\n  // if result of templater is string, do the usual stuff\n  if (typeof translatedValueOrArray === 'string') {\n    return renderInnerHtml === true && hasHtmlTags(translatedValueOrArray) ? React.createElement('span', {\n      dangerouslySetInnerHTML: { __html: translatedValueOrArray }\n    }) : translatedValueOrArray;\n  }\n\n  // at this point we know we have react components;\n  // check if there are HTMLTags in the translation (not allowed)\n  var _iteratorNormalCompletion = true;\n  var _didIteratorError = false;\n  var _iteratorError = undefined;\n\n  try {\n    for (var _iterator = translatedValueOrArray[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n      var portion = _step.value;\n\n      if (typeof portion === 'string' && hasHtmlTags(portion)) {\n        warning('HTML tags in the translation string are not supported when passing React components as arguments to the translation.');\n        return '';\n      }\n    }\n\n    // return as Element\n  } catch (err) {\n    _didIteratorError = true;\n    _iteratorError = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion && _iterator.return) {\n        _iterator.return();\n      }\n    } finally {\n      if (_didIteratorError) {\n        throw _iteratorError;\n      }\n    }\n  }\n\n  return React.createElement.apply(React, ['span', null].concat(_toConsumableArray(translatedValueOrArray)));\n};\n\nexport var hasHtmlTags = function hasHtmlTags(value) {\n  var pattern = /(&[^\\s]*;|<\\/?\\w+((\\s+\\w+(\\s*=\\s*(?:\".*?\"|'.*?'|[\\^'\">\\s]+))?)+\\s*|\\s*)\\/?>)/;\n  return value.search(pattern) >= 0;\n};\n\n/**\n * @func templater\n * @desc A poor mans template parser\n * @param {string} strings The template string\n * @param {object} data The data that should be inserted in template\n * @return {string} The template string with the data merged in\n */\nexport var templater = function templater(strings) {\n  var data = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  if (!strings) return '';\n\n  // ${**}\n  // brackets to include it in the result of .split()\n  var genericPlaceholderPattern = '(\\\\${\\\\s*[^\\\\s}]+\\\\s*})';\n\n  // split: from 'Hey ${name}' -> ['Hey', '${name}']\n  // filter: clean empty strings\n  // map: replace ${prop} with data[prop]\n  var splitStrings = strings.split(new RegExp(genericPlaceholderPattern, 'gmi')).filter(function (str) {\n    return !!str;\n  }).map(function (templatePortion) {\n    var matched = void 0;\n    for (var prop in data) {\n      if (matched) break;\n      var pattern = '\\\\${\\\\s*' + prop + '\\\\s*}';\n      var regex = new RegExp(pattern, 'gmi');\n      if (regex.test(templatePortion)) matched = data[prop];\n    }\n    if (typeof matched === 'undefined') return templatePortion;\n    return matched;\n  });\n\n  // if there is a React element, return as array\n  if (splitStrings.some(function (portion) {\n    return React.isValidElement(portion);\n  })) {\n    return splitStrings;\n  }\n\n  // otherwise concatenate all portions into the translated value\n  return splitStrings.reduce(function (translated, portion) {\n    return translated + ('' + portion);\n  }, '');\n};\n\nexport var getIndexForLanguageCode = function getIndexForLanguageCode(code, languages) {\n  return languages.map(function (language) {\n    return language.code;\n  }).indexOf(code);\n};\n\nexport var objectValuesToString = function objectValuesToString(data) {\n  return !Object.values ? Object.keys(data).map(function (key) {\n    return data[key].toString();\n  }).toString() : Object.values(data).toString();\n};\n\nexport var validateOptions = function validateOptions(options) {\n  if (options.onMissingTranslation !== undefined && typeof options.onMissingTranslation !== 'function') {\n    throw new Error('react-localize-redux: an invalid onMissingTranslation function was provided.');\n  }\n\n  if (options.renderToStaticMarkup !== false && typeof options.renderToStaticMarkup !== 'function') {\n    throw new Error('\\n      react-localize-redux: initialize option renderToStaticMarkup is invalid.\\n      Please see https://ryandrewjohnson.github.io/react-localize-redux-docs/#initialize.\\n    ');\n  }\n\n  return options;\n};\n\nexport var getTranslationsForLanguage = function getTranslationsForLanguage(language, languages, translations) {\n  // no language! return no translations\n  if (!language) {\n    return {};\n  }\n\n  var languageCode = language.code;\n\n  var languageIndex = getIndexForLanguageCode(languageCode, languages);\n  var keys = Object.keys(translations);\n  var totalKeys = keys.length;\n  var translationsForLanguage = {};\n\n  for (var i = 0; i < totalKeys; i++) {\n    var key = keys[i];\n    translationsForLanguage[key] = translations[key][languageIndex];\n  }\n\n  return translationsForLanguage;\n};\n\nexport var storeDidChange = function storeDidChange(store, onChange) {\n  var currentState = void 0;\n\n  function handleChange() {\n    var nextState = store.getState();\n    if (nextState !== currentState) {\n      onChange(currentState);\n      currentState = nextState;\n    }\n  }\n\n  var unsubscribe = store.subscribe(handleChange);\n  handleChange();\n  return unsubscribe;\n};\n\nexport var getSingleToMultilanguageTranslation = function getSingleToMultilanguageTranslation(language, languageCodes, flattenedTranslations, existingTranslations) {\n  var languageIndex = languageCodes.indexOf(language);\n  var translations = languageIndex >= 0 ? flattenedTranslations : {};\n  var keys = Object.keys(translations);\n  var totalKeys = keys.length;\n  var singleLanguageTranslations = {};\n\n  var _loop = function _loop(i) {\n    var key = keys[i];\n    // loop through each language, and for languages that don't match languageIndex\n    // keep existing translation data, and for languageIndex store new translation data\n    var translationValues = languageCodes.map(function (code, index) {\n      var existingValues = existingTranslations[key] || [];\n\n      return index === languageIndex ? flattenedTranslations[key] : existingValues[index];\n    });\n\n    singleLanguageTranslations[key] = translationValues;\n  };\n\n  for (var i = 0; i < totalKeys; i++) {\n    _loop(i);\n  }\n\n  return singleLanguageTranslations;\n};\n\nexport var get = function get(obj, path) {\n  var defaultValue = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : undefined;\n\n  var pathArr = path.split('.').filter(Boolean);\n  return pathArr.reduce(function (ret, key) {\n    return ret && ret[key] ? ret[key] : defaultValue;\n  }, obj);\n};\n\n// Thanks react-redux for utility function\n// https://github.com/reactjs/react-redux/blob/master/src/utils/warning.js\nexport var warning = function warning(message) {\n  if (typeof console !== 'undefined' && typeof console.error === 'function') {\n    console.error(message);\n  }\n\n  try {\n    // This error was thrown as a convenience so that if you enable\n    // \"break on all exceptions\" in your console,\n    // it would pause the execution at this line.\n    throw new Error(message);\n  } catch (e) {}\n};"]},"metadata":{},"sourceType":"module"}